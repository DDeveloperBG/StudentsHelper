function engine(){const n=((n=1)=>{const r=[null,activateFirstPart,activateSecondPart,activateThirdPart,activateFourthPart],t=()=>document.getElementById(`part-${n}`),i=(i,u)=>{t().classList.add(hiddenClassName),n=u(n),r[n](i),t().classList.remove(hiddenClassName)};return{showLastPart(n){n.preventDefault();i(n,n=>--n)},showNextPart(n){n.preventDefault();i(n,n=>++n)}}})();let t=Array.from(document.querySelectorAll("img.role"));t.forEach(t=>{t.addEventListener(clickEventName,n.showNextPart)});document.getElementById("past-part").addEventListener(clickEventName,n.showLastPart);document.getElementById("continue").addEventListener(clickEventName,n.showNextPart)}function activateFirstPart(){document.getElementById("register-submit").classList.add(hiddenClassName);document.getElementById("continue").classList.add(hiddenClassName);document.getElementById("past-part").classList.add(hiddenClassName);document.getElementById("second-auth-option").classList.add(hiddenClassName);document.querySelector(".more-options").classList.remove(hiddenClassName)}function activateSecondPart(n){const t=document.getElementById("role");t.value=n.target.getAttribute("role");document.getElementById("past-part").classList.remove(hiddenClassName);const i=document.getElementById("register-submit"),r=document.getElementById("continue");document.getElementById("second-auth-option").classList.remove(hiddenClassName);document.querySelector(".more-options").classList.add(hiddenClassName);t.value=="student"?(i.classList.remove(hiddenClassName),r.classList.add(hiddenClassName)):(r.classList.remove(hiddenClassName),i.classList.add(hiddenClassName))}function activateThirdPart(){async function r(t){if(t+1!==n.length){for(let i=t+1;i<n.length;i++)n[i].parentNode.classList.add(hiddenClassName);i(n[t+1],n[t].value)}}function i(n,t){function i(t){function r(n){let t=document.createElement("option");return t.value=n.id,t.textContent=n.name,t}const i=new DocumentFragment;let u=defaultLocationNames[n.name];i.appendChild(r({id:0,name:u}));t.forEach(n=>{i.appendChild(r(n))});n.innerHTML="";n.appendChild(i);n.parentNode.classList.remove(hiddenClassName)}n.children.length>0&&t==null||fetch(`/Locations/Get?selectName=${n.name}&lastSelectedId=${t}`).then(async n=>await n.json()).then(i)}document.getElementById("second-auth-option").classList.add(hiddenClassName);const t=n=>document.querySelector(`select[name="${n}"]`),n=[t("regions"),t("townships"),t("populatedAreas"),t("Input.TeacherModel.SchoolId")];n.slice(0,n.length-1).forEach((n,t)=>n.addEventListener(chooseOptionEventName,r.bind(null,t)));i(n[0],null)}function activateFourthPart(){document.getElementById("register-submit").classList.remove(hiddenClassName);document.getElementById("continue").classList.add(hiddenClassName)}window.addEventListener("load",engine);var hiddenClassName="hidden",clickEventName="click",chooseOptionEventName="change",defaultLocationNames={regions:"Област",townships:"Община",populatedAreas:"Населено място","Input.TeacherModel.SchoolId":"Училище"};