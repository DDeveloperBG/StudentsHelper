function runRegisterEngine(){try{registerEngine()}catch(n){console.error(n)}}function registerEngine(){function u(n){const t=Array.from(n.querySelectorAll("[name]"));return t.every(n=>$(n).valid())}function s(n,i){if(!u(n.getCurrentPart())){i.preventDefault();return}t=="student"&&(document.getElementById("part-3").remove(),document.getElementById("part-4").remove())}function h(){document.getElementById("allErrorsList").classList.remove(n);document.getElementById("register-submit").classList.add(n);document.getElementById("continue").classList.add(n);document.getElementById("past-part").classList.add(n);document.getElementById("second-auth-option").classList.add(n);document.querySelector(".more-options").classList.remove(n)}function c(i){document.getElementById("allErrorsList").classList.add(n);const r=document.getElementById("Input_Role");t=i.target.getAttribute("userRole");t!=null&&(r.value=t);document.getElementById("second-auth-option-userRole").value=t;document.getElementById("past-part").classList.remove(n);const u=document.getElementById("register-submit"),f=document.getElementById("continue");document.getElementById("second-auth-option").classList.remove(n);document.querySelector(".more-options").classList.add(n);r.value=="student"?(u.classList.remove(n),f.classList.add(n)):(f.classList.remove(n),u.classList.add(n))}function l(){async function u(i){if(i+1===t.length){document.getElementById("continue").classList.remove(n);return}document.getElementById("continue").classList.add(n);for(let r=i+1;r<t.length;r++)t[r].parentNode.classList.add(n);r(t[i+1],t[i].value)}function r(t,i){function r(i){function u(n){let t=document.createElement("option");return t.value=n.id,t.textContent=n.name,t}const r=new DocumentFragment;let f=e[t.name];r.appendChild(u({id:0,name:f}));i.forEach(n=>{r.appendChild(u(n))});t.innerHTML="";t.appendChild(r);t.parentNode.classList.remove(n)}t.children.length>0&&i==null||fetch(`/Locations/Get?selectName=${t.name}&lastSelectedId=${i}`).then(async n=>await n.json()).then(r)}Array.from(document.getElementById("SchoolId").parentNode.classList).some(t=>t==n)?document.getElementById("continue").classList.add(n):document.getElementById("continue").classList.remove(n);document.getElementById("register-submit").classList.add(n);document.getElementById("second-auth-option").classList.add(n);const i=n=>document.querySelector(`select[name="${n}"]`),t=[i("regions"),i("townships"),i("populatedAreas"),document.getElementById("SchoolId")];t.slice(0,t.length).forEach((n,t)=>n.addEventListener(f,u.bind(null,t)));r(t[0],null)}function a(){document.getElementById("register-submit").classList.remove(n);document.getElementById("continue").classList.add(n)}let n="hidden",i="click",f="change",t=null,e={regions:"Област",townships:"Община",populatedAreas:"Населено място","Input.TeacherModel.SchoolId":"Училище"};const r=((t=1)=>{const f=[null,h,c,l,a],i=()=>document.getElementById(`part-${t}`),r=(r,e)=>{if(u(i())){if(t==3){const t=document.getElementById("SchoolId");if(t.value==0||Array.from(t.parentNode.classList).some(t=>t==n))return}i().classList.add(n);t=e(t);f[t](r);i().classList.remove(n)}};return{getCurrentPart:i,showLastPart(n){n.preventDefault();r(n,n=>--n)},showNextPart(n){n.preventDefault();r(n,n=>++n)}}})();let o=Array.from(document.querySelectorAll("img.role"));o.forEach(n=>{n.addEventListener(i,r.showNextPart)});document.getElementById("past-part").addEventListener(i,r.showLastPart);document.getElementById("continue").addEventListener(i,r.showNextPart);document.getElementById("register-submit").addEventListener(i,s.bind(null,r))}window.addEventListener("DOMContentLoaded",runRegisterEngine);