window.addEventListener("load",()=>{function e(t){t+1!==n.length&&(r(t+1),u(n[t+1],n[t].value))}function r(t){t!=n.length&&(n[t].parentNode.classList.add(i),n[t].value=0,r(t+1))}function u(n,t){function r(t){function u(n){let t=document.createElement("option");return t.value=n.id,t.textContent=n.name,t}const r=new DocumentFragment;let e=f[n.name];r.appendChild(u({id:0,name:e}));t.forEach(n=>{r.appendChild(u(n))});n.innerHTML="";n.appendChild(r);n.parentNode.classList.remove(i)}n.children.length>0&&t==null||fetch(`/Locations/Get?selectName=${n.name}&lastSelectedId=${t}`).then(async n=>await n.json()).then(r)}const f={regionId:"Област",townshipId:"Община",populatedAreaId:"Населено място",schoolId:"Училище"},i="hidden",t=n=>document.querySelector(`select[name="${n}"]`),n=[t("regionId"),t("townshipId"),t("populatedAreaId"),t("schoolId")];n.slice(0,n.length-1).forEach((n,t)=>n.addEventListener("change",e.bind(null,t)));u(n[0],null)});